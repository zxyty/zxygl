!function(t){var s={};function i(n){if(s[n])return s[n].exports;var e=s[n]={i:n,l:!1,exports:{}};return t[n].call(e.exports,e,e.exports,i),e.l=!0,e.exports}i.m=t,i.c=s,i.d=function(t,s,n){i.o(t,s)||Object.defineProperty(t,s,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,s){if(1&s&&(t=i(t)),8&s)return t;if(4&s&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&s&&"string"!=typeof t)for(var e in t)i.d(n,e,function(s){return t[s]}.bind(null,e));return n},i.n=function(t){var s=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(s,"a",s),s},i.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)},i.p="",i(i.s=0)}([function(t,s,i){"use strict";i.r(s);class n{constructor(t,s,i){this.x=t||0,this.y=s||0,this.z=i||0,this.dx=null,this.dy=null,this.dz=null,this.tx=null,this.ty=null,this.tz=null,this.ool=null}static add(t,s){return new n(t.x+s.x,t.y+s.y,t.z+s.z)}static sub(t,s){return new n(t.x-s.x,t.y-s.y,t.z-s.z)}static multiply(t,s){return new n(t.x*s,t.y*s,t.z*s)}static cross(t,s){return new n(t.y*s.z-t.z*s.y,t.z*s.x-t.x*s.z,t.x*s.y-t.y*s.x)}static dot(t,s){return t.x*s.x+t.y*s.y+t.z*s.z}copy(t){this.x=t.x,this.y=t.y,this.z=t.z}addSelf(t){this.x+=t.x,this.y+=t.y,this.z+=t.z}add(t,s){this.x=t.x+s.x,this.y=t.y+s.y,this.z=t.z+s.z}subSelf(t){this.x-=t.x,this.y-=t.y,this.z-=t.z}sub(t,s){this.x=t.x-s.x,this.y=t.y-s.y,this.z=t.z-s.z}cross(t){this.tx=this.x,this.ty=this.y,this.tz=this.z,this.x=this.ty*t.z-this.tz*t.y,this.y=this.tz*t.x-this.tx*t.z,this.z=this.tx*t.y-this.ty*t.x}multiply(t){this.x*=t,this.y*=t,this.z*=t}distanceTo(t){return this.dx=this.x-t.x,this.dy=this.y-t.y,this.dz=this.z-t.z,Math.sqrt(this.dx*this.dx+this.dy*this.dy+this.dz*this.dz)}distanceToSquared(t){return this.dx=this.x-t.x,this.dy=this.y-t.y,this.dz=this.z-t.z,this.dx*this.dx+this.dy*this.dy+this.dz*this.dz}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}negate(){this.x=-this.x,this.y=-this.y,this.z=-this.z}normalize(){return this.length()>0?this.ool=1/this.length():this.ool=0,this.x*=this.ool,this.y*=this.ool,this.z*=this.ool,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}clone(){return new n(this.x,this.y,this.z)}toString(){return"Vector3 ("+this.x+", "+this.y+", "+this.z+")"}}class e{constructor(t){this.r=null,this.g=null,this.b=null,this.a=null,this.hex=null,this.styleString=null,this.setHex(t||4278190080)}setHex(t){this.hex=t,this.updateRGBA(),this.updateStyleString()}setRGBA(t,s,i,n){this.r=t,this.g=s,this.b=i,this.a=n,this.updateHex(),this.updateStyleString()}updateRGBA(){this.r=this.hex>>16&255,this.g=this.hex>>8&255,this.b=255&this.hex,this.a=this.hex>>24&255}updateHex(){this.hex=this.a<<24|this.r<<16|this.g<<8|this.b}updateStyleString(){this.styleString="rgba("+this.r+","+this.g+","+this.b+","+this.a/255+")"}toString(){return"Color ( r: "+this.r+", g: "+this.g+", b: "+this.b+", a: "+this.a+", hex: "+this.hex+", style: "+this.styleString+" )"}}class h extends n{constructor(t,s,i,h,r,c){super((t.x+s.x+i.x)/3,(t.y+s.y+i.y)/3,(t.z+s.z+i.z)/3),this.a=t,this.b=s,this.c=i,this.screen=new n,this.uv=h||[[0,0],[0,0],[0,0]],this.normal=r||new n,this.color=c||new e}toString(){return"Face3 ( "+this.a+", "+this.b+", "+this.c+" )"}}class r extends n{constructor(t,s,i,h,r,c,o){super((t.x+s.x+i.x+h.x)/4,(t.y+s.y+i.y+h.y)/4,(t.z+s.z+i.z+h.z)/4),this.a=t,this.b=s,this.c=i,this.d=h,this.screen=new n,this.color=o||new e}toString(){return"Face4 ( "+this.a+", "+this.b+", "+this.c+" )"}}class c{constructor(){this.vertices=new Array,this.faces=new Array}}class o{constructor(){this.identity()}identity(){this.n11=1,this.n12=0,this.n13=0,this.n21=0,this.n22=1,this.n23=0,this.n31=0,this.n32=0,this.n33=1}assign(t){this.n11=t.n11,this.n12=t.n12,this.n13=t.n13,this.n21=t.n21,this.n22=t.n22,this.n23=t.n23,this.n31=t.n31,this.n32=t.n32,this.n33=t.n33}multiplySelf(t){let s=this.n11,i=this.n12,n=this.n13,e=(this.n14,this.n21),h=this.n22,r=this.n23,c=(this.n24,this.n31),o=this.n32,l=this.n33;this.n34;this.n11=s*t.n11+i*t.n21+n*t.n31,this.n12=s*t.n12+i*t.n22+n*t.n32,this.n13=s*t.n13+i*t.n23+n*t.n33,this.n21=e*t.n11+h*t.n21+r*t.n31,this.n22=e*t.n12+h*t.n22+r*t.n32,this.n23=e*t.n13+h*t.n23+r*t.n33,this.n31=c*t.n11+o*t.n21+l*t.n31,this.n32=c*t.n12+o*t.n22+l*t.n32,this.n33=c*t.n13+o*t.n23+l*t.n33}inverse(){let t=this.n11,s=this.n12,i=this.n13,n=(this.n14,this.n21),e=this.n22,h=this.n23,r=(this.n24,this.n31),c=this.n32,o=this.n33;this.n34;this.n11=t,this.n12=n,this.n13=r,this.n21=s,this.n22=e,this.n23=c,this.n31=i,this.n32=h,this.n33=o}clone(){let t=new o;return t.n11=this.n11,t.n12=this.n12,t.n13=this.n13,t.n21=this.n21,t.n22=this.n22,t.n23=this.n23,t.n31=this.n31,t.n32=this.n32,t.n33=this.n33,t}toString(){return"| "+this.n11+" "+this.n12+" "+this.n13+" |\n| "+this.n21+" "+this.n22+" "+this.n23+" |\n| "+this.n31+" "+this.n32+" "+this.n33+" |"}}class l{constructor(){this.identity()}static translationMatrix(t,s,i){let n=new l;return n.n14=t,n.n24=s,n.n34=i,n}static scaleMatrix(t,s,i){let n=new l;return n.n11=t,n.n22=s,n.n33=i,n}static rotationXMatrix(t){let s=new l;return s.n22=s.n33=Math.cos(t),s.n32=Math.sin(t),s.n23=-s.n32,s}static rotationYMatrix(t){let s=new l;return s.n11=s.n33=Math.cos(t),s.n13=Math.sin(t),s.n31=-s.n13,s}static rotationZMatrix(t){let s=new l;return s.n11=s.n22=Math.cos(t),s.n21=Math.sin(t),s.n12=-s.n21,s}identity(){this.n11=1,this.n12=0,this.n13=0,this.n14=0,this.n21=0,this.n22=1,this.n23=0,this.n24=0,this.n31=0,this.n32=0,this.n33=1,this.n34=0,this.x=new n(0,0,0),this.y=new n(0,0,0),this.z=new n(0,0,0)}lookAt(t,s,i){this.z.sub(s,t),this.z.normalize(),this.x.copy(this.z),this.x.cross(i),this.x.normalize(),this.y.copy(this.x),this.y.cross(this.z),this.y.normalize(),this.y.negate(),this.n11=this.x.x,this.n12=this.x.y,this.n13=this.x.z,this.n14=-this.x.dot(t),this.n21=this.y.x,this.n22=this.y.y,this.n23=this.y.z,this.n24=-this.y.dot(t),this.n31=this.z.x,this.n32=this.z.y,this.n33=this.z.z,this.n34=-this.z.dot(t)}transform(t){let s=t.x,i=t.y,n=t.z;t.x=this.n11*s+this.n12*i+this.n13*n+this.n14,t.y=this.n21*s+this.n22*i+this.n23*n+this.n24,t.z=this.n31*s+this.n32*i+this.n33*n+this.n34}multiply(t,s){this.n11=t.n11*s.n11+t.n12*s.n21+t.n13*s.n31,this.n12=t.n11*s.n12+t.n12*s.n22+t.n13*s.n32,this.n13=t.n11*s.n13+t.n12*s.n23+t.n13*s.n33,this.n14=t.n11*s.n14+t.n12*s.n24+t.n13*s.n34+t.n14,this.n21=t.n21*s.n11+t.n22*s.n21+t.n23*s.n31,this.n22=t.n21*s.n12+t.n22*s.n22+t.n23*s.n32,this.n23=t.n21*s.n13+t.n22*s.n23+t.n23*s.n33,this.n24=t.n21*s.n14+t.n22*s.n24+t.n23*s.n34+t.n24,this.n31=t.n31*s.n11+t.n32*s.n21+t.n33*s.n31,this.n32=t.n31*s.n12+t.n32*s.n22+t.n33*s.n32,this.n33=t.n31*s.n13+t.n32*s.n23+t.n33*s.n33,this.n34=t.n31*s.n14+t.n32*s.n24+t.n33*s.n34+t.n34}multiplySelf(t){let s=this.n11,i=this.n12,n=this.n13,e=this.n14,h=this.n21,r=this.n22,c=this.n23,o=this.n24,l=this.n31,a=this.n32,x=this.n33,u=this.n34;this.n11=s*t.n11+i*t.n21+n*t.n31,this.n12=s*t.n12+i*t.n22+n*t.n32,this.n13=s*t.n13+i*t.n23+n*t.n33,this.n14=s*t.n14+i*t.n24+n*t.n34+e,this.n21=h*t.n11+r*t.n21+c*t.n31,this.n22=h*t.n12+r*t.n22+c*t.n32,this.n23=h*t.n13+r*t.n23+c*t.n33,this.n24=h*t.n14+r*t.n24+c*t.n34+o,this.n31=l*t.n11+a*t.n21+x*t.n31,this.n32=l*t.n12+a*t.n22+x*t.n32,this.n33=l*t.n13+a*t.n23+x*t.n33,this.n34=l*t.n14+a*t.n24+x*t.n34+u}clone(){let t=new l;return t.n11=this.n11,t.n12=this.n12,t.n13=this.n13,t.n14=this.n14,t.n21=this.n21,t.n22=this.n22,t.n23=this.n23,t.n24=this.n24,t.n31=this.n31,t.n32=this.n32,t.n33=this.n33,t.n34=this.n34,t}toString(){return"| "+this.n11+" "+this.n12+" "+this.n13+" "+this.n14+" |\n| "+this.n21+" "+this.n22+" "+this.n23+" "+this.n24+" |\n| "+this.n31+" "+this.n32+" "+this.n33+" "+this.n34+" |"}}class a{constructor(t,s){this.x=t||0,this.y=s||0}static add(t,s){return new a(t.x+s.x,t.y+s.y)}static sub(t,s){return new a(t.x-s.x,t.y-s.y)}static multiply(t,s){return new a(t.x*s,t.y*s)}copy(t){this.x=t.x,this.y=t.y}addSelf(t){this.x+=t.x,this.y+=t.y}add(t,s){this.x=t.x+s.x,this.y=t.y+s.y}subSelf(t){this.x-=t.x,this.y-=t.y}sub(t,s){this.x=t.x-s.x,this.y=t.y-s.y}multiply(t){this.x*=t,this.y*=t}unit(){this.multiply(1/this.length())}expand(t,s){this.unit(this.sub(t,s)),s.addSelf(this)}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}lengthSq(){return this.x*this.x+this.y*this.y}clone(){return new a(this.x,this.y)}toString(){return"Vector2 ("+this.x+", "+this.y+")"}}class x extends n{constructor(t,s,i){super(t,s,i),this.u=null,this.v=null,this.screen=new n,this.normal=null,this.visible=null}toString(){return"Vertex ( "+this.x+", "+this.y+", "+this.z+" )"}}class u{constructor(){this.position=new n(0,0,0),this.rotation=new n(0,0,0),this.scale=new n(1,1,1),this.matrix=new l,this.screen=new n(0,0,0)}updateMatrix(){this.matrix.identity(),this.matrix.multiplySelf(l.translationMatrix(this.position.x,this.position.y,this.position.z)),this.matrix.multiplySelf(l.rotationXMatrix(this.rotation.x)),this.matrix.multiplySelf(l.rotationYMatrix(this.rotation.y)),this.matrix.multiplySelf(l.rotationZMatrix(this.rotation.z)),this.matrix.multiplySelf(l.scaleMatrix(this.scale.x,this.scale.y,this.scale.z))}}class y extends u{constructor(t,s){super(),this.geometry=t,this.material=s}}class d extends u{constructor(t){super(),this.size=1,this.material=t}}class z{constructor(){this.matrix=new l,this.viewport=null,this.renderList=null,this.face3Pool=new Array,this.face4Pool=new Array,this.width=null,this.height=null,this.widthHalf=null,this.heightHalf=null}setSize(t,s){this.width=t,this.height=s,this.widthHalf=this.width/2,this.heightHalf=this.height/2}sort(t,s){return t.screen.z-s.screen.z}render(t,s){let i=0,n=0,e=s.focus*s.zoom;this.renderList=new Array,t.objects.map((t,c)=>{if(t instanceof y)this.matrix.multiply(s.matrix,t.matrix),t.geometry.vertices.map((t,i)=>{t.screen.copy(t),this.matrix.transform(t.screen),t.screen.z=e/(s.focus+t.screen.z),t.visible=t.screen.z>0,t.screen.x*=t.screen.z,t.screen.y*=t.screen.z}),t.geometry.faces.map(s=>{s instanceof h?s.a.visible&&s.b.visible&&s.c.visible&&(t.doubleSided||(s.c.screen.x-s.a.screen.x)*(s.b.screen.y-s.a.screen.y)-(s.c.screen.y-s.a.screen.y)*(s.b.screen.x-s.a.screen.x)>0)&&(s.screen.z=.3*(s.a.scene.z+s.b.scene.z+s.c.scene.z),null==this.face3Pool[i]&&(this.face3Pool[i]=new h(new x,new x,new x)),this.face3Pool[i].a.screen.copy(s.a.screen),this.face3Pool[i].b.screen.copy(s.b.screen),this.face3Pool[i].c.screen.copy(s.c.screen),this.face3Pool[i].screen.z=s.screen.z,this.face3Pool[i].color=s.color,this.face3Pool[i].material=t.material,this.renderList.push(this.face3Pool[i]),i++):s instanceof r&&s.a.visible&&s.b.visible&&s.c.visible&&(t.doubleSided||(s.d.screen.x-s.a.screen.x)*(s.b.screen.y-s.a.screen.y)-(s.d.screen.y-s.a.screen.y)*(s.b.screen.x-s.a.screen.x)>0||(s.b.screen.x-s.c.screen.x)*(s.d.screen.y-s.c.screen.y)-(s.b.screen.y-s.c.screen.y)*(s.d.screen.x-s.c.screen.x)>0)&&(s.screen.z=.25*(s.a.screen.z+s.b.screen.z+s.c.screen.z+s.d.screen.z),null==this.face4Pool[n]&&(this.face4Pool[n]=new r(new x,new x,new x,new x)),this.face4Pool[n].a.screen.copy(s.a.screen),this.face4Pool[n].b.screen.copy(s.b.screen),this.face4Pool[n].c.screen.copy(s.c.screen),this.face4Pool[n].d.screen.copy(s.d.screen),this.face4Pool[n].screen.z=s.screen.z,this.face4Pool[n].color=s.color,this.face4Pool[n].material=t.material,this.renderList.push(this.face4Pool[n]),n++)});else if(t instanceof d){if(t.screen.copy(t.position),s.matrix.transform(t.screen),t.screen.z=e/(s.focus+t.screen.z),t.screen.z<0)return;t.screen.x*=t.screen.z,t.screen.y*=t.screen.z,this.renderList.push(t)}}),this.renderList.sort(this.sort)}}class f{constructor(t,s){this.color=new e((s?255*s<<24:4278190080)|t)}}class p{constructor(){}}window.ZXYGL={Face3:h,Face4:r,Geometry:c,Matrix3:o,Matrix4:l,Vector2:a,Vector3:n,Vertex:x,Color:e,Scene:class{constructor(){this.objects=new Array}add(t){this.objects.push(t)}remove(t){for(let s=0;s<this.objects.length;s++)t==this.objects[s]&&alert("scene-remove")}toString(){return"Scene ( "+this.objects+" )"}},Renderer:z,CanvasRenderer:class extends z{constructor(){super(),this.context=null,this.viewport=document.createElement("canvas"),this.viewport.style.position="absolute",this.context=this.viewport.getContext("2d")}setSize(t,s){super.setSize(t,s),this.viewport.width=this.width,this.viewport.height=this.height,this.context.setTransform(1,0,0,1,this.widthHalf,this.heightHalf)}render(t,s){super.render(t,s);let i=2*Math.PI;this.context.clearRect(-this.widthHalf,-this.heightHalf,this.width,this.height),this.renderList.map(t=>{t.material instanceof f?this.context.fillStyle=t.material.color.styleString:t.material instanceof p&&(this.context.fillStyle=t.color.styleString),t instanceof h?(this.context.beginPath(),this.context.moveTo(t.a.screen.x,t.a.screen.y),this.context.lineTo(t.b.screen.x,t.b.screen.y),this.context.lineTo(t.c.screen.x,t.c.screen.y),this.context.fill(),this.context.closePath()):t instanceof r?(this.context.beginPath(),this.context.moveTo(t.a.screen.x,t.a.screen.y),this.context.lineTo(t.b.screen.x,t.b.screen.y),this.context.lineTo(t.c.screen.x,t.c.screen.y),this.context.lineTo(t.d.screen.x,t.d.screen.y),this.context.fill(),this.context.closePath()):t instanceof d&&(this.context.beginPath(),this.context.arc(t.screen.x,t.screen.y,t.size*t.screen.z,0,i,!0),this.context.fill(),this.context.closePath())})}},SvgRenderer:class extends z{constructor(){super(),this.svgPathPool=null,this.svgCirclePool=null,this.viewport=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.viewport.style.position="absolute",this.svgPathPool=new Array,this.svgCirclePool=new Array}setSize(t,s){this.viewport.setAttribute("viewBox",-t/2+" "+-s/2+" "+t+" "+s),this.viewport.setAttribute("width",t),this.viewport.setAttribute("height",s)}render(t,s){for(super.render(t,s);this.viewport.childNodes.length>0;)this.viewport.removeChild(this.viewport.childNodes[0]);let i,n=0,e=0;this.renderList.map((t,s)=>{t instanceof h?(i=this.getPathNode(n++)).setAttribute("d","M "+t.a.screen.x+" "+t.a.screen.y+" L "+t.b.screen.x+" "+t.b.screen.y+" L "+t.c.screen.x+","+t.c.screen.y+"z"):t instanceof r?(i=this.getPathNode(n++)).setAttribute("d","M "+t.a.screen.x+" "+t.a.screen.y+" L "+t.b.screen.x+" "+t.b.screen.y+" L "+t.c.screen.x+","+t.c.screen.y+" L "+t.d.screen.x+","+t.d.screen.y+"z"):t instanceof Particle&&((i=this.getCircleNode(e++)).setAttribute("cx",t.screen.x),i.setAttribute("cy",t.screen.y),i.setAttribute("r",t.size*t.screen.z)),t.material instanceof ColorMaterial?i.setAttribute("style","fill: rgb("+t.material.color.r+","+t.material.color.g+","+t.material.color.b+")"):t.material instanceof FaceColorMaterial&&i.setAttribute("style","fill: rgb("+t.color.r+","+t.color.g+","+t.color.b+")"),this.viewport.appendChild(i)})}getPathNode(t){return null==this.svgPathPool[t]?(this.svgPathPool[t]=document.createElementNS("http://www.w3.org/2000/svg","path"),this.svgPathPool[t]):this.svgPathPool[t]}getCircleNode(t){return null==this.svgCirclePool[t]?(this.svgCirclePool[t]=document.createElementNS("http://www.w3.org/2000/svg","circle"),this.svgCirclePool[t].setAttribute("fill","red"),this.svgCirclePool[t]):this.svgCirclePool[t]}},Camera:class extends n{constructor(t,s,i){super(t,s,i),this.up=new n(0,1,0),this.target=new n(0,0,0),this.zoom=3,this.focus=500,this.roll=0,this.matrix=new l,this.updateMatrix()}updateMatrix(){this.matrix.lookAt(this,this.target,this.up)}toString(){return"Camera ( "+this.x+", "+this.y+", "+this.z+" )"}},ColorMaterial:f,FaceColorMaterial:p,Object3D:u,Mesh:y,Particle:d,Plane:class extends c{constructor(t,s){super();let i=t/2,n=s/2;this.v(-i,n,0),this.v(i,n,0),this.v(i,-n,0),this.v(-i,-n,0),this.f4(0,1,2,3)}v(t,s,i){this.vertices.push(new x(t,s,i))}f4(t,s,i,n){this.faces.push(new r(this.vertices[t],this.vertices[s],this.vertices[i],this.vertices[n]))}},Cube:class extends c{constructor(t,s,i){super();let n=t/2,e=s/2,h=i/2;this.v(n,e,-h),this.v(n,-e,-h),this.v(-n,-e,-h),this.v(-n,e,-h),this.v(n,e,h),this.v(n,-e,h),this.v(-n,-e,h),this.v(-n,e,h),this.f4(0,1,2,3),this.f4(4,7,6,5),this.f4(0,4,5,1),this.f4(1,5,6,2),this.f4(2,6,7,3),this.f4(4,0,3,7)}v(t,s,i){this.vertices.push(new x(t,s,i))}f4(t,s,i,n){this.faces.push(new r(this.vertices[t],this.vertices[s],this.vertices[i],this.vertices[n]))}}}}]);